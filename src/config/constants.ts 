/**
 * API Configuration and Constants
 * Centralized configuration for Spring Boot backend API endpoints and app settings
 */

import { Platform } from 'react-native';

// Environment-based configuration for Spring Boot backend
const getBaseURL = (env: 'development' | 'staging' | 'production') => {
  if (env === 'development') {
    // Use 10.0.2.2 for Android emulator, localhost for iOS simulator
    return Platform.OS === 'android' 
      ? 'http://10.0.2.2:8080/api'
      : 'http://localhost:8080/api';
  }
  return env === 'staging'
    ? 'https://staging-api.yourdomain.com/api'
    : 'https://api.yourdomain.com/api';
};

export const ENV = {
  development: {
    API_URL: getBaseURL('development'),
    GOOGLE_WEB_CLIENT_ID: 'your-dev-google-client-id',
    FACEBOOK_APP_ID: 'your-dev-facebook-app-id',
  },
  staging: {
    API_URL: getBaseURL('staging'),
    GOOGLE_WEB_CLIENT_ID: 'your-staging-google-client-id',
    FACEBOOK_APP_ID: 'your-staging-facebook-app-id',
  },
  production: {
    API_URL: getBaseURL('production'),
    GOOGLE_WEB_CLIENT_ID: 'your-prod-google-client-id',
    FACEBOOK_APP_ID: 'your-prod-facebook-app-id',
  },
};

// Current environment (change based on your setup)
const CURRENT_ENV: keyof typeof ENV = __DEV__ ? 'development' : 'production';

// Export current config
export const API_CONFIG = ENV[CURRENT_ENV];

// API Endpoints
export const API_ENDPOINTS = {
  // Auth endpoints
  AUTH: {
    LOGIN: '/auth/login',
    REGISTER: '/auth/register',
    LOGOUT: '/auth/logout',
    REFRESH: '/auth/refresh',
    VERIFY: '/auth/verify',
    GOOGLE: '/auth/google',
    FACEBOOK: '/auth/facebook',
    FORGOT_PASSWORD: '/auth/forgot-password',
    RESET_PASSWORD: '/auth/reset-password',
  },
  
  // User endpoints
  USER: {
    PROFILE: '/user/profile',
    UPDATE: '/user/update',
    CHANGE_PASSWORD: '/user/change-password',
    DELETE: '/user/delete',
  },
  
  // Booking endpoints
  BOOKING: {
    LIST: '/bookings',
    CREATE: '/bookings/create',
    UPDATE: (id: string) => `/bookings/${id}`,
    DELETE: (id: string) => `/bookings/${id}`,
    DETAILS: (id: string) => `/bookings/${id}`,
  },
  
  // Barber endpoints
  BARBER: {
    LIST: '/barbers',
    DETAILS: (id: string) => `/barbers/${id}`,
    AVAILABILITY: (id: string) => `/barbers/${id}/availability`,
    SERVICES: (id: string) => `/barbers/${id}/services`,
  },
  
  // Shop endpoints
  SHOP: {
    LIST: '/shops',
    DETAILS: (id: string) => `/shops/${id}`,
    BARBERS: (id: string) => `/shops/${id}/barbers`,
    SERVICES: (id: string) => `/shops/${id}/services`,
  },
  
  // Service endpoints
  SERVICE: {
    LIST: '/services',
    DETAILS: (id: string) => `/services/${id}`,
  },
};

// Request timeout
export const REQUEST_TIMEOUT = 10000; // 10 seconds

// Keychain service name
export const KEYCHAIN_SERVICE = 'com.barbershop.app';

// AsyncStorage keys
export const STORAGE_KEYS = {
  AUTH_STORE: 'auth-storage',
  USER_PREFERENCES: 'user-preferences',
  THEME: 'app-theme',
  LANGUAGE: 'app-language',
};

// User roles
export const USER_ROLES = {
  CUSTOMER: 'customer',
  BARBER: 'barber',
  SHOP_ADMIN: 'shop_admin',
  MAIN_ADMIN: 'main_admin',
} as const;

export type UserRole = typeof USER_ROLES[keyof typeof USER_ROLES];

// Navigation routes
export const ROUTES = {
  // Auth
  HOME: 'Home',
  LOGIN: 'Login',
  REGISTER: 'Register',
  FORGOT_PASSWORD: 'ForgotPassword',
  
  // Dashboards
  CUSTOMER_DASHBOARD: 'CustomerDashboard',
  BARBER_DASHBOARD: 'BarberDashboard',
  SHOP_ADMIN_DASHBOARD: 'ShopAdminDashboard',
  MAIN_ADMIN_DASHBOARD: 'MainAdminDashboard',
} as const;

// Validation patterns
export const VALIDATION = {
  EMAIL: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
  PHONE: /^\+?[1-9]\d{1,14}$/,
  PASSWORD_MIN_LENGTH: 8,
  PASSWORD_PATTERN: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,
};

// Error messages
export const ERROR_MESSAGES = {
  NETWORK_ERROR: 'Network error. Please check your connection.',
  INVALID_CREDENTIALS: 'Invalid email or password.',
  SESSION_EXPIRED: 'Your session has expired. Please log in again.',
  SERVER_ERROR: 'Server error. Please try again later.',
  VALIDATION_ERROR: 'Please check your input and try again.',
  UNAUTHORIZED: 'You are not authorized to perform this action.',
};

// Success messages
export const SUCCESS_MESSAGES = {
  LOGIN_SUCCESS: 'Welcome back!',
  REGISTER_SUCCESS: 'Account created successfully!',
  LOGOUT_SUCCESS: 'Logged out successfully.',
  UPDATE_SUCCESS: 'Updated successfully.',
  DELETE_SUCCESS: 'Deleted successfully.',
  BOOKING_SUCCESS: 'Booking created successfully!',
};

// HTTP Status codes
export const HTTP_STATUS = {
  OK: 200,
  CREATED: 201,
  BAD_REQUEST: 400,
  UNAUTHORIZED: 401,
  FORBIDDEN: 403,
  NOT_FOUND: 404,
  INTERNAL_SERVER_ERROR: 500,
  SERVICE_UNAVAILABLE: 503,
};

// App configuration
export const APP_CONFIG = {
  NAME: 'Barbershop',
  VERSION: '1.0.0',
  SUPPORT_EMAIL: 'support@barbershop.com',
  PRIVACY_URL: 'https://barbershop.com/privacy',
  TERMS_URL: 'https://barbershop.com/terms',
};

// Demo accounts (for development/testing)
export const DEMO_ACCOUNTS = {
  CUSTOMER: 'customer@demo.com',
  BARBER: 'barber@demo.com',
  SHOP_ADMIN: 'shopadmin@demo.com',
  MAIN_ADMIN: 'mainadmin@demo.com',
  PASSWORD: 'demo123',
};

// Export default config
export default {
  API_CONFIG,
  API_ENDPOINTS,
  REQUEST_TIMEOUT,
  KEYCHAIN_SERVICE,
  STORAGE_KEYS,
  USER_ROLES,
  ROUTES,
  VALIDATION,
  ERROR_MESSAGES,
  SUCCESS_MESSAGES,
  HTTP_STATUS,
  APP_CONFIG,
  DEMO_ACCOUNTS,
};